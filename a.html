<h5>main.go</h5><hr /><!DOCTYPE html><html><body>package&nbsp;main<br /><br />import&nbsp;(<br />&nbsp;&nbsp;&nbsp;&nbsp;"encoding/json"<br />&nbsp;&nbsp;&nbsp;&nbsp;"fmt"<br />&nbsp;&nbsp;&nbsp;&nbsp;"io/ioutil"<br />&nbsp;&nbsp;&nbsp;&nbsp;"os"<br />&nbsp;&nbsp;&nbsp;&nbsp;"os/exec"<br />&nbsp;&nbsp;&nbsp;&nbsp;"path/filepath"<br />&nbsp;&nbsp;&nbsp;&nbsp;"regexp"<br />&nbsp;&nbsp;&nbsp;&nbsp;"strconv"<br />&nbsp;&nbsp;&nbsp;&nbsp;"strings"<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;"golang.org/x/tools/cmd/guru/serial"<br />)<br /><br />type&nbsp;<a name='main.go:17:6'>analyzeResult</a>&nbsp;struct&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:18:2'>path</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:19:2'>start</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int64<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:20:2'>end</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int64<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:21:2'>line</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int64<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:22:2'>lineOffset</a>&nbsp;int64<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:23:2'>identifier</a>&nbsp;string<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:24:2'>definition</a>&nbsp;<a href='#main.go:14:2'>serial</a>.<a href='#/src/golang.org/x/tools/cmd/guru/serial/serial.go:59:6'>Definition</a><br />}<br /><br />func&nbsp;(<a name='main.go:27:7'>a</a>&nbsp;*<a href='#main.go:17:6'>analyzeResult</a>)&nbsp;<a name='main.go:27:25'>ToString</a>()&nbsp;string&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<a href='#main.go:5:2'>fmt</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/fmt/print.go:194:6'>Sprintf</a>("path:&nbsp;%s,&nbsp;start:&nbsp;%d,&nbsp;end:&nbsp;%d,&nbsp;line:&nbsp;%d,&nbsp;lineOffset:&nbsp;%d,&nbsp;identifier:&nbsp;%s\n&nbsp;%s&nbsp;\n",&nbsp;<a href='#main.go:27:7'>a</a>.<a href='#main.go:18:2'>path</a>,&nbsp;<a href='#main.go:27:7'>a</a>.<a href='#main.go:19:2'>start</a>,&nbsp;<a href='#main.go:27:7'>a</a>.<a href='#main.go:20:2'>end</a>,&nbsp;<a href='#main.go:27:7'>a</a>.<a href='#main.go:21:2'>line</a>,&nbsp;<a href='#main.go:27:7'>a</a>.<a href='#main.go:22:2'>lineOffset</a>,&nbsp;<a href='#main.go:27:7'>a</a>.<a href='#main.go:23:2'>identifier</a>,&nbsp;<a href='#main.go:27:7'>a</a>.<a href='#main.go:24:2'>definition</a>.<a href='#/src/golang.org/x/tools/cmd/guru/serial/serial.go:60:2'>ObjPos</a>)<br />}<br /><br />func&nbsp;<a name='main.go:31:6'>analyzeFile</a>(<a name='main.go:31:18'>path</a>&nbsp;string,&nbsp;<a name='main.go:31:31'>info</a>&nbsp;<a href='#main.go:7:2'>os</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/types.go:21:6'>FileInfo</a>)&nbsp;(*[]*<a href='#main.go:17:6'>analyzeResult</a>,&nbsp;error)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:32:2'>analyzeResults</a>&nbsp;:=&nbsp;make([]*<a href='#main.go:17:6'>analyzeResult</a>,&nbsp;0)<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:33:2'>lastIdentifierExist</a>&nbsp;:=&nbsp;false<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:35:2'>file</a>,&nbsp;<a name='main.go:35:8'>err</a>&nbsp;:=&nbsp;<a href='#main.go:7:2'>os</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/file.go:246:6'>Open</a>(<a href='#main.go:31:18'>path</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:35:8'>err</a>&nbsp;!=&nbsp;nil&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil,&nbsp;<a href='#main.go:35:8'>err</a><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;defer&nbsp;<a href='#main.go:35:2'>file</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/file_unix.go:128:16'>Close</a>()<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:40:2'>fileBytes</a>,&nbsp;<a href='#main.go:35:8'>err</a>&nbsp;:=&nbsp;<a href='#main.go:6:2'>ioutil</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/io/ioutil/ioutil.go:49:6'>ReadFile</a>(<a href='#main.go:31:18'>path</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:35:8'>err</a>&nbsp;!=&nbsp;nil&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil,&nbsp;<a href='#main.go:35:8'>err</a><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;<a name='main.go:45:6'>line</a>&nbsp;int64&nbsp;=&nbsp;1<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;<a name='main.go:46:6'>totalReadLineBytesLen</a>&nbsp;int64&nbsp;=&nbsp;1<br />&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;<a name='main.go:47:6'>i</a>&nbsp;:=&nbsp;int64(1);&nbsp;<a href='#main.go:47:6'>i</a>&nbsp;<=&nbsp;<a href='#main.go:31:31'>info</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/types.go:23:2'>Size</a>();&nbsp;<a href='#main.go:47:6'>i</a>++&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:40:2'>fileBytes</a>[<a href='#main.go:47:6'>i</a>-1]&nbsp;==&nbsp;'\n'&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:45:6'>line</a>++<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:46:6'>totalReadLineBytesLen</a>&nbsp;=&nbsp;<a href='#main.go:47:6'>i</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:53:3'>offset</a>&nbsp;:=&nbsp;"#"&nbsp;+&nbsp;<a href='#main.go:11:2'>strconv</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strconv/itoa.go:18:6'>FormatInt</a>(<a href='#main.go:47:6'>i</a>,&nbsp;10)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:54:3'>bytePos</a>&nbsp;:=&nbsp;<a href='#main.go:31:18'>path</a>&nbsp;+&nbsp;":"&nbsp;+&nbsp;<a href='#main.go:53:3'>offset</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:55:3'>lineOffset</a>&nbsp;:=&nbsp;<a href='#main.go:47:6'>i</a>&nbsp;-&nbsp;<a href='#main.go:46:6'>totalReadLineBytesLen</a>&nbsp;+&nbsp;1<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:57:3'>output</a>,&nbsp;<a name='main.go:57:11'>err</a>&nbsp;:=&nbsp;<a href='#main.go:8:2'>exec</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/exec/exec.go:130:6'>Command</a>("guru",&nbsp;"-json",&nbsp;"definition",&nbsp;<a href='#main.go:54:3'>bytePos</a>).<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/exec/exec.go:462:15'>Output</a>()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:57:11'>err</a>&nbsp;!=&nbsp;nil&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:57:11'>err</a>.Error()&nbsp;==&nbsp;"exit&nbsp;status&nbsp;1"&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:33:2'>lastIdentifierExist</a>&nbsp;==&nbsp;true&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:61:6'>analyzeResultsLen</a>&nbsp;:=&nbsp;len(<a href='#main.go:32:2'>analyzeResults</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:62:6'>lastAnalyzeResult</a>&nbsp;:=&nbsp;<a href='#main.go:32:2'>analyzeResults</a>[<a href='#main.go:61:6'>analyzeResultsLen</a>-1]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:62:6'>lastAnalyzeResult</a>.<a href='#main.go:20:2'>end</a>&nbsp;=&nbsp;<a href='#main.go:47:6'>i</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:62:6'>lastAnalyzeResult</a>.<a href='#main.go:23:2'>identifier</a>&nbsp;=&nbsp;string(<a href='#main.go:40:2'>fileBytes</a>[<a href='#main.go:62:6'>lastAnalyzeResult</a>.<a href='#main.go:19:2'>start</a>:<a href='#main.go:47:6'>i</a>])<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:33:2'>lastIdentifierExist</a>&nbsp;=&nbsp;false<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil,&nbsp;<a href='#main.go:57:11'>err</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:74:3'>definition</a>&nbsp;:=&nbsp;<a href='#main.go:14:2'>serial</a>.<a href='#/src/golang.org/x/tools/cmd/guru/serial/serial.go:59:6'>Definition</a>{}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:57:11'>err</a>&nbsp;=&nbsp;<a href='#main.go:4:2'>json</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/encoding/json/decode.go:93:6'>Unmarshal</a>(<a href='#main.go:57:3'>output</a>,&nbsp;&<a href='#main.go:74:3'>definition</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:57:11'>err</a>&nbsp;!=&nbsp;nil&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil,&nbsp;<a href='#main.go:57:11'>err</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:33:2'>lastIdentifierExist</a>&nbsp;==&nbsp;true&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:81:4'>matched</a>,&nbsp;<a name='main.go:81:13'>err</a>&nbsp;:=&nbsp;<a href='#main.go:10:2'>regexp</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/regexp/regexp.go:449:6'>Match</a>("[0-9A-Za-z_]",&nbsp;[]byte{<a href='#main.go:40:2'>fileBytes</a>[<a href='#main.go:47:6'>i</a>-1]})<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:81:13'>err</a>&nbsp;!=&nbsp;nil&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:5:2'>fmt</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/fmt/print.go:256:6'>Println</a>(<a href='#main.go:81:13'>err</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:81:4'>matched</a>&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:33:2'>lastIdentifierExist</a>&nbsp;==&nbsp;false&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:32:2'>analyzeResults</a>&nbsp;=&nbsp;append(<a href='#main.go:32:2'>analyzeResults</a>,&nbsp;&<a href='#main.go:17:6'>analyzeResult</a>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:31:18'>path</a>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:31:18'>path</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:19:2'>start</a>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:47:6'>i</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:74:3'>definition</a>:&nbsp;<a href='#main.go:74:3'>definition</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:45:6'>line</a>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:45:6'>line</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:55:3'>lineOffset</a>:&nbsp;<a href='#main.go:55:3'>lineOffset</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:33:2'>lastIdentifierExist</a>&nbsp;=&nbsp;true<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&<a href='#main.go:32:2'>analyzeResults</a>,&nbsp;nil<br />}<br /><br />func&nbsp;<a name='main.go:105:6'>buildLink</a>(<a name='main.go:105:16'>project</a>&nbsp;string,&nbsp;<a name='main.go:105:32'>ele</a>&nbsp;*<a href='#main.go:17:6'>analyzeResult</a>,&nbsp;<a name='main.go:105:52'>fileBytes</a>&nbsp;[]byte)&nbsp;string&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:106:2'>tag</a>&nbsp;:=&nbsp;string(<a href='#main.go:105:52'>fileBytes</a>[<a href='#main.go:105:32'>ele</a>.<a href='#main.go:19:2'>start</a>:<a href='#main.go:105:32'>ele</a>.<a href='#main.go:20:2'>end</a>])<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:107:2'>anchor</a>&nbsp;:=&nbsp;<a href='#main.go:12:2'>strings</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strings/strings.go:690:6'>Replace</a>(<a href='#main.go:105:32'>ele</a>.<a href='#main.go:24:2'>definition</a>.<a href='#/src/golang.org/x/tools/cmd/guru/serial/serial.go:60:2'>ObjPos</a>,&nbsp;<a href='#main.go:105:16'>project</a>,&nbsp;"",&nbsp;-1)<br />&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:107:2'>anchor</a>&nbsp;=&nbsp;<a href='#main.go:12:2'>strings</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strings/strings.go:690:6'>Replace</a>(<a href='#main.go:107:2'>anchor</a>,&nbsp;<a href='#main.go:7:2'>os</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/env.go:80:6'>Getenv</a>("GOPATH"),&nbsp;"",&nbsp;-1)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:105:32'>ele</a>.<a href='#main.go:24:2'>definition</a>.<a href='#/src/golang.org/x/tools/cmd/guru/serial/serial.go:60:2'>ObjPos</a>&nbsp;==&nbsp;<a href='#main.go:105:32'>ele</a>.<a href='#main.go:18:2'>path</a>+":"+<a href='#main.go:11:2'>strconv</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strconv/itoa.go:18:6'>FormatInt</a>(<a href='#main.go:105:32'>ele</a>.<a href='#main.go:21:2'>line</a>,&nbsp;10)+":"+<a href='#main.go:11:2'>strconv</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strconv/itoa.go:18:6'>FormatInt</a>(<a href='#main.go:105:32'>ele</a>.<a href='#main.go:22:2'>lineOffset</a>,&nbsp;10)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"<a&nbsp;name='"&nbsp;+&nbsp;<a href='#main.go:107:2'>anchor</a>&nbsp;+&nbsp;"'>"&nbsp;+&nbsp;<a href='#main.go:106:2'>tag</a>&nbsp;+&nbsp;"</a>"<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"<a&nbsp;href='#"&nbsp;+&nbsp;<a href='#main.go:107:2'>anchor</a>&nbsp;+&nbsp;"'>"&nbsp;+&nbsp;<a href='#main.go:106:2'>tag</a>&nbsp;+&nbsp;"</a>"<br />}<br /><br />func&nbsp;<a name='main.go:117:6'>buildHTML</a>(<a name='main.go:117:16'>project</a>&nbsp;string,&nbsp;<a name='main.go:117:32'>path</a>&nbsp;string,&nbsp;<a name='main.go:117:45'>analyzeResultsPtr</a>&nbsp;*[]*<a href='#main.go:17:6'>analyzeResult</a>)&nbsp;(*string,&nbsp;error)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;<a name='main.go:118:6'>html</a>&nbsp;=&nbsp;"<!DOCTYPE&nbsp;html><html><body>"<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:120:2'>analyzeResults</a>&nbsp;:=&nbsp;*<a href='#main.go:117:45'>analyzeResultsPtr</a><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:122:2'>file</a>,&nbsp;<a name='main.go:122:8'>err</a>&nbsp;:=&nbsp;<a href='#main.go:7:2'>os</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/file.go:246:6'>Open</a>(<a href='#main.go:117:32'>path</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:122:8'>err</a>&nbsp;!=&nbsp;nil&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil,&nbsp;<a href='#main.go:122:8'>err</a><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;defer&nbsp;<a href='#main.go:122:2'>file</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/file_unix.go:128:16'>Close</a>()<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:127:2'>fileBytes</a>,&nbsp;<a href='#main.go:122:8'>err</a>&nbsp;:=&nbsp;<a href='#main.go:6:2'>ioutil</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/io/ioutil/ioutil.go:49:6'>ReadFile</a>(<a href='#main.go:117:32'>path</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:122:8'>err</a>&nbsp;!=&nbsp;nil&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil,&nbsp;<a href='#main.go:122:8'>err</a><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;<a name='main.go:132:6'>lastEndAt</a>&nbsp;int64<br />&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;<a name='main.go:133:6'>_</a>,&nbsp;<a name='main.go:133:9'>ele</a>&nbsp;:=&nbsp;range&nbsp;<a href='#main.go:120:2'>analyzeResults</a>&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:134:3'>text</a>&nbsp;:=&nbsp;string(<a href='#main.go:127:2'>fileBytes</a>[<a href='#main.go:132:6'>lastEndAt</a>:<a href='#main.go:133:9'>ele</a>.<a href='#main.go:19:2'>start</a>])<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:134:3'>text</a>&nbsp;=&nbsp;<a href='#main.go:12:2'>strings</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strings/strings.go:690:6'>Replace</a>(<a href='#main.go:134:3'>text</a>,&nbsp;"&nbsp;",&nbsp;"&nbsp;",&nbsp;-1)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:118:6'>html</a>&nbsp;+=&nbsp;<a href='#main.go:12:2'>strings</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strings/strings.go:690:6'>Replace</a>(<a href='#main.go:134:3'>text</a>,&nbsp;"\t",&nbsp;"&nbsp;&nbsp;&nbsp;&nbsp;",&nbsp;-1)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:118:6'>html</a>&nbsp;+=&nbsp;<a href='#main.go:105:6'>buildLink</a>(<a href='#main.go:117:16'>project</a>,&nbsp;<a href='#main.go:133:9'>ele</a>,&nbsp;<a href='#main.go:127:2'>fileBytes</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:132:6'>lastEndAt</a>&nbsp;=&nbsp;<a href='#main.go:133:9'>ele</a>.<a href='#main.go:20:2'>end</a><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:141:2'>analyzeResultsLen</a>&nbsp;:=&nbsp;len(<a href='#main.go:120:2'>analyzeResults</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:141:2'>analyzeResultsLen</a>&nbsp;>&nbsp;0&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:143:3'>lastAnalyzeResult</a>&nbsp;:=&nbsp;<a href='#main.go:120:2'>analyzeResults</a>[<a href='#main.go:141:2'>analyzeResultsLen</a>-1]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:118:6'>html</a>&nbsp;+=&nbsp;string(<a href='#main.go:127:2'>fileBytes</a>[<a href='#main.go:143:3'>lastAnalyzeResult</a>.<a href='#main.go:20:2'>end</a>:])<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:118:6'>html</a>&nbsp;+=&nbsp;"</body></html>"<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:118:6'>html</a>&nbsp;=&nbsp;<a href='#main.go:12:2'>strings</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strings/strings.go:690:6'>Replace</a>(<a href='#main.go:118:6'>html</a>,&nbsp;"\n",&nbsp;"<br&nbsp;/>",&nbsp;-1)<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&<a href='#main.go:118:6'>html</a>,&nbsp;nil<br />}<br /><br />func&nbsp;<a name='main.go:153:6'>main</a>()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:154:2'>project</a>&nbsp;:=&nbsp;<a href='#main.go:7:2'>os</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/proc.go:15:5'>Args</a>[1]<br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:155:2'>targetFilePath</a>&nbsp;:=&nbsp;<a href='#main.go:7:2'>os</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/proc.go:15:5'>Args</a>[2]<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:157:2'>file</a>,&nbsp;<a name='main.go:157:8'>err</a>&nbsp;:=&nbsp;<a href='#main.go:7:2'>os</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/file.go:255:6'>Create</a>(<a href='#main.go:155:2'>targetFilePath</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;defer&nbsp;<a href='#main.go:157:2'>file</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/file_unix.go:128:16'>Close</a>()<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:157:8'>err</a>&nbsp;!=&nbsp;nil&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:5:2'>fmt</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/fmt/print.go:256:6'>Println</a>(<a href='#main.go:157:8'>err</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:7:2'>os</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/proc.go:48:6'>Exit</a>(1)<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:164:2'>walk</a>&nbsp;:=&nbsp;func(<a name='main.go:164:15'>path</a>&nbsp;string,&nbsp;<a name='main.go:164:28'>info</a>&nbsp;<a href='#main.go:7:2'>os</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/types.go:21:6'>FileInfo</a>,&nbsp;<a name='main.go:164:46'>err</a>&nbsp;error)&nbsp;error&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:164:28'>info</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/types.go:26:2'>IsDir</a>()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;!<a href='#main.go:12:2'>strings</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strings/strings.go:375:6'>HasSuffix</a>(<a href='#main.go:164:15'>path</a>,&nbsp;".go")&nbsp;||&nbsp;<a href='#main.go:12:2'>strings</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strings/strings.go:375:6'>HasSuffix</a>(<a href='#main.go:164:15'>path</a>,&nbsp;"_test.go")&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:173:3'>analyzeResults</a>,&nbsp;<a href='#main.go:164:46'>err</a>&nbsp;:=&nbsp;<a href='#main.go:31:6'>analyzeFile</a>(<a href='#main.go:164:15'>path</a>,&nbsp;<a href='#main.go:164:28'>info</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:164:46'>err</a>&nbsp;!=&nbsp;nil&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='main.go:178:3'>html</a>,&nbsp;<a href='#main.go:164:46'>err</a>&nbsp;:=&nbsp;<a href='#main.go:117:6'>buildHTML</a>(<a href='#main.go:154:2'>project</a>,&nbsp;<a href='#main.go:164:15'>path</a>,&nbsp;<a href='#main.go:173:3'>analyzeResults</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<a href='#main.go:164:46'>err</a>&nbsp;!=&nbsp;nil&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:157:2'>file</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/file.go:199:16'>WriteString</a>("<h5>"&nbsp;+&nbsp;<a href='#main.go:12:2'>strings</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/strings/strings.go:690:6'>Replace</a>(<a href='#main.go:164:15'>path</a>,&nbsp;<a href='#main.go:154:2'>project</a>,&nbsp;"",&nbsp;-1)&nbsp;+&nbsp;"</h5>")<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:157:2'>file</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/file.go:199:16'>WriteString</a>("<hr&nbsp;/>")<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:157:2'>file</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/file.go:199:16'>WriteString</a>(*<a href='#main.go:178:3'>html</a>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:157:2'>file</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/os/file.go:199:16'>WriteString</a>("<br&nbsp;/>&nbsp;<br&nbsp;/>")<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<a href='#main.go:9:2'>filepath</a>.<a href='#/Users/caicai/.gvm/gos/go1.8.3/src/path/filepath/path.go:393:6'>Walk</a>(<a href='#main.go:154:2'>project</a>,&nbsp;<a href='#main.go:164:2'>walk</a>)<br />}<br /></body></html><br /> <br />